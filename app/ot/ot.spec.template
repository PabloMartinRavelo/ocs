%define _prefix gemsoft
%define gemopt opt
%define name ot
%define version @VERSION@
%define repository gemini
%define _rpmfilename %%{NAME}-%%{VERSION}-%%{RELEASE}.%%{ARCH}.rpm

Summary: %{name} Package
Name: ot
Version: %{version}
Release: 0
License: GPL
Group: Gemini
Source0: %{name}_%{version}_linux64.tar.gz
BuildRoot: /var/tmp/%{name}_%{version}/BUILDROOT
%define _topdir /var/tmp/%{name}_%{version}
BuildArch: i386
# This is to remove the bogus ODBC dependencies generated by installing the JRE.
Autoreq: 0

%description
Gemini OCS2 Observing Tool, phase 2.

%prep
%setup -q -n %{name}_%{version}_linux64

%install
mkdir -p $RPM_BUILD_ROOT/gemsoft/opt/%{name}
cp -a * $RPM_BUILD_ROOT/gemsoft/opt/%{name}/
chmod a+x $RPM_BUILD_ROOT/gemsoft/opt/%{name}/%{name}_%{version}
chmod a+x $RPM_BUILD_ROOT/gemsoft/opt/%{name}/jre/bin/java*

# Create the shorthand executable launcher file.
mkdir -p $RPM_BUILD_ROOT/gemsoft/bin
cat > $RPM_BUILD_ROOT/gemsoft/bin/%{name} <<DELIM
#!/bin/sh
/gemsoft/opt/%{name}/%{name}_%{version}
DELIM
chmod a+x $RPM_BUILD_ROOT/gemsoft/bin/%{name}

%files
%defattr(-,root,root)
## List of files that are installed.
/gemsoft/opt/%{name}
/gemsoft/bin/%{name}

%clean
## Remove the RPM build directory.
rm -rf $RPM_BUILD_ROOT

%changelog
* Tue Aug 20 2013 Sebastian Raaphorst <sraaphor@gemini.edu>
 - Adpated original OCS spec file for OCS15.

