<?xml version="1.0"?>
<!DOCTYPE recipes PUBLIC "-//Gemini Observatory//DTD for Data Processing//EN" "DataProc.dtd">
<!--
  This document describes data processing recipes for the
  Gemini Observing Tool (OT). An element is defined for each recipe
  and corresponds to the DataProcRecipeNode class.
-->

<recipes version="0.1">

<!-- gemseeing -->
<!--
    <recipe name="gemseeing" task="gemini.gemtools.gemseeing" id="gemseeing"
            desc="Semi-automatic method for determination of image quality for seeing data.">
        <inputs>
            <input name="image"  desc="Image (w/ MEF extension)"/>
        </inputs>
        <outputs>
            <output name="coords" desc="daofind output file"/>
            <output name="psffile" desc="File for psfmeasure output"/>
        </outputs>
        <params>
            <param type="boolean"  name="fl_inter"     value="no"       desc="Interactive use"				       level="3"/>
            <param type="boolean"  name="fl_useall"    value="no"       desc="Use all objects if N>maxnobj"		       level="3"/>
            <param type="int"      name="maxnobj"      value="100"      desc="Approximate maximum number of objects"           level="3"/>
            <param type="boolean"  name="fl_update"    value="yes"      desc="Update image keywords"			       level="3"/>
            <param type="boolean"  name="fl_keep"      value="yes"      desc="Keep output tables"			       level="3"/>
            <param type="boolean"  name="fl_strehl"    value="yes"      desc="Derive Strehl ratio if defined for instrument"   level="3"/>
            <param type="boolean"  name="fl_overwrite" value="no"       desc="Overwrite results from previous use"	       level="2"/>
            <param type="boolean"  name="fl_cleed"     value="yes"      desc="Clean measurements of EED of outliers"	       level="3"/>
            <param type="String"   name="key_inst"     value="INSTRUME" desc="Keyword for instrument"		               level="3"/>
            <param type="String"   name="key_camera"   value="CAMERA"   desc="Keyword for NIRI camera"		               level="3"/>
            <param type="String"   name="key_ron"      value="RDNOISE"  desc="Keyword for read out noise in electrons"         level="3"/>
            <param type="String"   name="key_gain"     value="GAIN"     desc="Keyword for gain in electrons/ADU"	       level="3"/>
            <param type="String"   name="key_filter"   value="FILTER"   desc="Keyword for filter"			       level="3"/>
            <param type="String"   name="instrument"   value=""         desc="Instrument"				       level="3"/>
            <param type="String"   name="camera"       value=""         desc="NIRI camera"				       level="3"/>
            <param type="double"   name="ron"          value="1."       desc="Read out noise in electrons"	               level="3"/>
            <param type="double"   name="gain"         value="1."       desc="Gain in e-/ADU"		                       level="3"/>
            <param type="String"   name="filter"       value=""         desc="Filter name"				       level="3"/>
            <param type="boolean"  name="fl_database"  value="yes"      desc="Use database values for parameters"	       level="3"/>
            <param type="String"   name="database"     value="gemtools$gemseeing.dat"        desc="Database to use"	       level="2"/>
            <param type="String"   name="stdatabase"   value="gemtools$gemseeing_strehl.dat" desc="Database for Strehl ratio"  level="3"/>
            <param type="double"   name="pixscale"     value="0.5"      desc="Pixel scale arcsec/pixel [database]"             level="2"/>
            <param type="double"   name="fwhmin"       value="1."       desc="Input FWHM PSF in arcsec (daofind) [database]"   level="1"/>
            <param type="double"   name="datamax"      value="40000."   desc="Maximum valid data value [database]"             level="2"/>
            <param type="double"   name="radius"       value="0."       desc="Radius in pixels for fit [database]"             level="3"/>
            <param type="double"   name="buffer"       value="8."       desc="Buffer zone in pixels for sky [database]"        level="3"/>
            <param type="double"   name="width"        value="2."       desc="Width in pixels for sky [database]"	       level="3"/>
            <param type="double"   name="fwhmnonao"    value="0.5"      desc="App non-AO FWHM in arcsec if using AO"           level="3"/>
            <param type="double"   name="sigthres"     value="10."      desc="Threshold in sigma of sky (daofind)"             level="2"/>
            <param type="double"   name="threshold"    value="INDEF"    desc="Threshold for daofind (daofind)"	               level="2"/>
            <param type="int"      name="niter"        value="3"        desc="Number of iterations (psfmeasure)"	       level="3"/>
            <param type="double"   name="mdaofaint"    value="-2.0"     desc="Faintest magnitude from daofind"                 level="3"/>
            <param type="double"   name="fwhmmin"      value="0."       desc="Minimim fwhm in arcsec"		               level="3"/>
            <param type="double"   name="fwhmmax"      value="0."       desc="Maximum fwhm in arcsec"		               level="3"/>
            <param type="double"   name="sharplow"     value="0.3"      desc="Minimum sharp from daofind"		       level="3"/>
            <param type="double"   name="sharphigh"    value="1.0"      desc="Maximum sharp from daofind"		       level="3"/>
            <param type="double"   name="sharpsig"     value="3."       desc="Sigma selection on sharp from daofind"           level="3"/>
            <param type="double"   name="dmagsig"      value="2."       desc="Sigma selection on magnitude difference"         level="3"/>
            <param type="double"   name="fwhmsig"      value="2.5"      desc="Sigma selection on FWHM"		               level="3"/>
            <param type="boolean"  name="verbose"      value="yes"      desc="Print intermediate results"		       level="2"/>
        </params>
    </recipe>
-->

<!-- imcoadd -->
    <recipe name="imcoadd" task="gemini.gemtools.imcoadd" id="imcoadd"
            desc="Combine science images, includes cleaning for cosmic ray events.">
        <inputs>
            <input name="images" desc="Input NIRI image(s)"/>
            <input name="badpixfile" desc="Bad pixel file or image"/>
        </inputs>
        <outputs>
	    <output name="outimage" desc="Output image name if not derived from reference"/>
        </outputs>
        <params>
            <param type="String" name="sci_ext" value="SCI" desc="Science extension name if MEF input"          level="3"/>
            <param type="String" name="var_ext" value="VAR" desc="Variance extension name if MEF input"         level="3"/>
            <param type="String" name="dq_ext" value="DQ" desc="Data quality extension name if MEF input"       level="3"/>
            <param type="String" name="immasks" value="DQ" desc="Masks of bad pixels for each image"           level="3"/>
            <param type="String" name="database" value="imcoadd.dat" desc="Database file for transformations"   level="3"/>
            <param type="double" name="threshold" value="20." desc="Threshold for daofind, sigma above sky"       level="2"/>
            <param type="double" name="fwhm" value="7." desc="FWHMPSF for daofind, in pixels (ref)"         level="2"/>
            <param type="double" name="box" value="20." desc="Box size for centering (ref)"                 level="2"/>
            <param type="choice" name="alignmethod" value="wcs" desc="Method for rough alignment of images (wcs|user|twodx|header)" level="2">
	        <choice	name="wcs"/>
		<choice name="user"/>
		<choice name="twodx"/>
		<choice name="header"/>
            </param>
            <param type="String" name="asection" value="default" desc="Image sections (2) (alignmethod=twodx)"   level="3"/>
            <param type="int"  name="xwindow" value="181" desc="Window size to search if using twodx"    level="3"/>
            <param type="String" name="key_inst" value="INSTRUME" desc="Header keyword for instrument"          level="3"/>
            <param type="String" name="key_camera" value="CAMERA" desc="Header keyword for camera (NIRI only)"  level="3"/>
            <param type="String" name="key_inport" value="INPORT" desc="Header keyword for ISS port"            level="3"/>
            <param type="String" name="key_xoff" value="default" desc="Header keyword for instrument X-offset (alignmethod=header)"  level="3"/>
            <param type="String" name="key_yoff" value="default" desc="Header keyword for instrument Y-offset (alignmethod=header)"  level="3"/>
            <param type="double" name="instscale" value="1." desc="Scale for offsets arcsec/unit (alignmethod=header)"          level="3"/>
            <param type="choice" name="xsign" value="default" desc="XOFFSET sign relative to detector (alignmethod=header)" level="3">
	        <choice	name="default"/>
		<choice name="negative"/>
		<choice name="positive"/>
            </param>
            <param type="choice" name="ysign" value="default" desc="YOFFSET sign relative to detector (alignmethod=header)" level="3">
	        <choice	name="default"/>
		<choice name="negative"/>
		<choice name="positive"/>
            </param>
            <param type="String" name="key_pixscale" value="PIXSCALE" desc="Header keyword for pixel scale in arcsec/pixel" level="3"/>
            <param type="double" name="pixscale" value="1." desc="Pixel scale arcsec/pixel"          level="3"/>
            <param type="double" name="dispmag" value="1.0" desc="Magnify for display"                            level="3"/>
            <param type="boolean" name="rotate" value="no" desc="Assume rotation > 0.5 deg"                        level="3"/>
            <param type="boolean" name="scale" value="no" desc="Allow significant scale differences"              level="3"/>
            <param type="choice" name="geofitgeom" value="rscale" desc="Fitting geometry for geomap" level="3">
	        <choice	name="shift"/>
		<choice name="xyscale"/>
		<choice name="rotate"/>
		<choice name="rscale"/>
		<choice name="rxyscale"/>
		<choice name="general"/>
            </param>
            <param type="int"  name="order" value="3" desc="Fitting order for geomap (geofitgeom=general)" level="3"/>
            <param type="double" name="sigfit" value="2.5" desc="Sigma rejection for geomap"                 level="3"/>
            <param type="int"  name="niter" value="5" desc="Iterations for geomap"                         level="3"/>
            <param type="double" name="coolimit" value="0.3" desc="Sigma in pixels for converged geomap"     level="3"/>
            <param type="choice" name="geointer" value="linear" desc="Interpolation for geotran" level="2">
	        <choice	name="nearest"/>
		<choice name="linear"/>
		<choice name="poly3"/>
		<choice name="poly5"/>
		<choice name="spline3"/>
            </param>
            <param type="String" name="key_ron" value="RDNOISE" desc="Header keyword for read noise in electrons"  level="3"/>
            <param type="String" name="key_gain" value="GAIN" desc="Header keyqword for gain in electrons/ADU"  level="3"/>
            <param type="double" name="ron" value="1." desc="Read out noise [electrons]"                          level="3"/>
            <param type="double" name="gain" value="1." desc="Gain [electrons/ADU]"                               level="3"/>
            <param type="double" name="datamin" value="-1000." desc="Minimum data value below sky for good pixels" level="3"/>
            <param type="String" name="key_sat" value="SATURATI" desc="Header keyword for maximum data value"   level="3"/>
            <param type="double" name="datamax" value="50000." desc="Maximum data value for good pixels"          level="3"/>
            <param type="double" name="aperture" value="30." desc="Aperture radius for magnitudes for scaling"    level="3"/>
            <param type="double" name="limit" value="15." desc="Intensity limit for CR cleaning"                  level="3"/>
            <param type="boolean" name="key_limit" value="yes" desc="Is limit given in sigmas above sky?"          level="3"/>
            <param type="double" name="lowsigma" value="7." desc="Sigma rejection limit for CRs"                  level="3"/>
            <param type="double" name="lowlimit" value="500." desc="Absolute rejection limit for CRs"             level="3"/>
            <param type="double" name="scalenoise" value="0." desc="Noise term proportional to signal above sky"  level="3"/>
            <param type="int"  name="growthrad" value="1" desc="Growth radius for CR, 0 or 1"       level="3"/>
            <param type="String" name="statsec" value="default" desc="Statistics section for sky determination" level="3"/>
            <param type="String" name="badpixfile" value="default" desc="Badpixel file or image"                level="2"/>
            <param type="boolean" name="fl_inter" value="no" desc="Inspect fits interactively"                     level="3"/>
            <param type="boolean" name="fl_refmark" value="no" desc="Mark objects on display for ref image"        level="3"/>
            <param type="boolean" name="fl_mark" value="no" desc="Mark objects on display for all images"          level="3"/>
            <param type="boolean" name="fl_fixpix" value="yes" desc="Fixpix input images using DQ (MEF only)"      level="3"/>
            <param type="boolean" name="fl_find" value="yes" desc="Find objects with daofind"                      level="3"/>
            <param type="boolean" name="fl_map" value="yes" desc="Determine the transformation"                    level="3"/>
            <param type="boolean" name="fl_trn" value="yes" desc="Make transformation and subtract sky"            level="3"/>
            <param type="boolean" name="fl_med" value="yes" desc="Calculate median image"                          level="3"/>
            <param type="boolean" name="fl_add" value="yes" desc="Calculate mean of masked images"                 level="3"/>
            <param type="boolean" name="fl_avg" value="no" desc="Calculate mean of images, no masking"             level="3"/>
            <param type="boolean" name="fl_scale" value="yes" desc="Combine mean images scaled with RELINT"        level="3"/>
            <param type="boolean" name="fl_overwrite" value="no" desc="Overwrite previous results"                 level="3"/>
            <param type="boolean" name="verbose" value="yes" desc="Verbose extended output"                        level="2"/>
        </params>
    </recipe>


<!-- NIRI nprepare -->
    <recipe name="nprepare" task="gemini.niri.nprepare" id="nprepare"
            desc="Take raw NIRI data and create the preliminary VAR and DQ frames">
        <inputs>
            <input name="inimages" desc="Images to be combined, first image as a reference"/>
            <input name="bpm" desc="Bad pixel mask file"/>
        </inputs>
        <outputs>
	    <output name="outimages" desc="Output image(s)"/>
        </outputs>
        <params>
	    <param type="String"  name="outpref"     value="n"   desc="Prefix for output image(s)" level="1"/>
	    <param type="String"  name="sci_ext"     value="SCI" desc="Name or number of science extension" level="3"/>
	    <param type="String"  name="var_ext"     value="VAR" desc="Name or number of variance extension" level="3"/>
	    <param type="String"  name="dq_ext"      value="DQ"  desc="Name or number of data quality extension" level="3"/>
	    <param type="boolean" name="fl_vardq"    value="yes" desc="Create variance and data quality frames?" level="3"/>
            <param type="String"  name="key_ron"     value="RDNOISE"    desc="New header keyword for read noise (e-)" level="3"/>
            <param type="String"  name="key_gain"    value="GAIN"       desc="New header keyword for gain (e-/ADU)" level="3"/>
            <param type="String"  name="key_sat"     value="SATURATI"   desc="New header keyword for saturation (ADU)" level="3"/>
            <param type="String"  name="key_nonlinear" value="NONLINEA" desc="New header keyword for non-linear regime (ADU)" level="3"/>
            <param type="String"  name="key_filter"  value="FILTER"     desc="New header keyword for parsed filter" level="3"/>
            <param type="String"  name="specsec"     value="[1:1024,1:1024]" desc="Default region of image to use for spectra when database cannot be found" level="3"/>
            <param type="String"  name="database"    value="niri$nprepare.dat" desc="NPREPARE database to use" level="3"/>
            <param type="boolean" name="verbose"     value="yes" desc="Verbose" level="2"/>
        </params>
    </recipe>

<!-- NIRI nisky -->
    <recipe name="nisky" task="gemini.niri.nisky" id="nisky"
            desc="Make an average or median sky image for NIRI images, removing stars first.">
        <inputs>
            <input name="inimages" desc="Raw NIRI image list to combine"/>
        </inputs>
        <outputs>
	    <output name="outimage" desc="Output sky image"/>
        </outputs>
        <params>
            <param type="String"  name="outtitle"    value="default"   desc="Title for output image" level="3"/>
            <param type="String"  name="combtype"    value="default"   desc="Type of combine operation" level="2">
	        <choice	name="default"/>
		<choice name="median"/>
		<choice name="average"/>
            </param>
            <param type="choice"  name="rejtype"     value="avsigclip" desc="Type of rejection" level="2">
	        <choice	name="none"/>
		<choice name="avsigclip"/>
		<choice name="minmax"/>
            </param>
            <param type="String"  name="statsec"     value="[100:924,100:924]"  desc="Statistics section" level="2"/>
            <param type="int"     name="nlow"        value="0"   desc="minmax: Number of low pixels to reject" level="2"/>
            <param type="int"     name="nhigh"       value="1"   desc="minmax: Number of high pixels to reject" level="2"/>
            <param type="double"  name="lsigma"      value="3."  desc="avsigclip: Lower sigma clipping factor" level="2"/>
            <param type="double"  name="hsigma"      value="3."  desc="avsigclip: Upper sigma clipping factor" level="2"/>
            <param type="double"  name="threshold"   value="4.5" desc="Threshold in sigma for object detection" level="2"/>
            <param type="double"  name="fwhmpsf"     value="4.5" desc="Estimate of PSF FWHM in pixels" level="2"/>
            <param type="double"  name="rebin"       value="7.0" desc="Minimum PSF FWHM (pix) for rebinning" level="3"/>
            <param type="String"  name="key_exptime" value="EXPTIME"  desc="Keyword for exposure time" level="3"/>
            <param type="String"  name="key_ron"     value="RDNOISE"  desc="Keyword for readout noise in e-" level="3"/>
            <param type="String"  name="key_gain"    value="GAIN"     desc="Keyword for gain in electrons/ADU" level="3"/>
            <param type="String"  name="key_sat"     value="SATURATI" desc="Keyword for saturation level in ADU" level="3"/>
            <param type="String"  name="key_filter"  value="FILTER"   desc="Header keyword for filter id" level="3"/>
            <param type="String"  name="key_airmass" value="AIRMASS"  desc="Header keyword for airmass" level="3"/>
            <param type="String"  name="masksuffix"  value="msk" desc="Mask name suffix" level="3"/>
            <param type="double"  name="maskfactor"  value="1."  desc="Scaling factor to change the size of mask holes" level="2"/>
            <param type="boolean" name="fl_keepmasks" value="no" desc="Keep object masks for each input image?" level="2"/>
            <param type="boolean" name="fl_gemseeing" value="no" desc="Use gemseeing to refine the PSF FWHM?" level="2"/>
            <param type="String"  name="sci_ext"     value="SCI" desc="Name or number of science extension" level="3"/>
            <param type="String"  name="var_ext"     value="VAR" desc="Name or number of variance extension" level="3"/>
            <param type="String"  name="dq_ext"      value="DQ"  desc="Name or number of data quality extension" level="3"/>
            <param type="boolean" name="fl_vardq"    value="yes" desc="Create variance and data quality frames in output?" level="3"/>
            <param type="boolean" name="fl_dqprop"   value="no"  desc="Retain input DQ information in output?" level="3"/>
            <param type="boolean" name="verbose"     value="yes" desc="Verbose actions" level="2"/>
        </params>
    </recipe>

<!-- NIRI nifastsky -->
    <recipe name="nifastsky" task="gemini.niri.nifastsky" id="nifastsky"
            desc="Make quick-and-dirty median sky image for NIRI images.">
        <inputs>
            <input name="inimages" desc="Raw NIRI image list to combine"/>
        </inputs>
        <outputs>
	    <output name="outimage" desc="Output sky image"/>
        </outputs>
        <params>
            <param type="String"  name="outtitle"    value="default"   desc="Title for output image" level="3"/>
            <param type="String"  name="key_exptime" value="EXPTIME"  desc="Keyword for exposure time" level="3"/>
            <param type="choice"  name="combtype"    value="default"   desc="Type of combine operation" level="3">
	        <choice	name="default"/>
		<choice name="median"/>
		<choice name="average"/>
            </param>
            <param type="String"  name="statsec"     value="[100:924,100:924]"  desc="Statistics section" level="2"/>
            <param type="choice"  name="rejtype"     value="minmax" desc="Type of rejection" level="3">
	        <choice	name="none"/>
		<choice name="minmax"/>
            </param>
            <param type="int"     name="nlow"        value="0"   desc="minmax: Number of low pixels to reject" level="3"/>
            <param type="int"     name="nhigh"       value="1"   desc="minmax: Number of high pixels to reject" level="3"/>
            <param type="String"  name="sci_ext"     value="SCI" desc="Name or number of science extension" level="3"/>
            <param type="String"  name="var_ext"     value="VAR" desc="Name or number of variance extension" level="3"/>
            <param type="String"  name="dq_ext"      value="DQ"  desc="Name or number of data quality extension" level="3"/>
            <param type="String"  name="key_ron"     value="RDNOISE"  desc="Header keyword for read noise (e-)" level="3"/>
            <param type="String"  name="key_gain"    value="GAIN"     desc="Header keyword for gain (e-/ADU)" level="3"/>
            <param type="boolean" name="fl_vardq"    value="no"  desc="Create variance and data quality frames in output?" level="3"/>
            <param type="boolean" name="fl_dqprop"   value="no"  desc="Retain input DQ information in output?" level="3"/>
            <param type="boolean" name="verbose"     value="yes" desc="Verbose actions" level="2"/>
        </params>
    </recipe>


<!-- NIRI nifastsky -->
    <recipe name="nireduce" task="gemini.niri.nireduce" id="nireduce"
            desc="Basic reduction of NIRI images.">
        <inputs>
            <input name="inimages"  desc="Input NIRI image(s)"/>
            <input name="skyimage"  desc="Sky image to subtract"/>
            <input name="darkimage" desc="Dark current image to subtract"/>
            <input name="flatimage" desc="Flat field image to divide"/>
        </inputs>
        <outputs>
	    <output name="outimages" desc="Output image(s)"/>
        </outputs>
        <params>
            <param type="String"  name="outprefix"    value="r"     desc="Prefix for output image(s)" level="1"/>
            <param type="boolean" name="fl_sky"       value="yes"   desc="Do sky subtraction?" level="2"/>
            <param type="double"  name="skylevel"     value="0.0"   desc="Constant sky level to add" level="3"/>
            <param type="boolean" name="fl_autosky"   value="yes"   desc="Add median of the sky frame as a constant?" level="3"/>
            <param type="boolean" name="fl_scalesky"  value="yes"   desc="Scale the sky before subtracting?" level="3"/>
            <param type="boolean" name="fl_dark"      value="no"    desc="Do explicit dark subtraction?" level="3"/>
            <param type="boolean" name="fl_flat"      value="yes"   desc="Do flat-fielding?" level="2"/>
            <param type="String"  name="statsec"      value="[100:924,100:924]" desc="Statistics section" level="2"/>
            <param type="String"  name="sci_ext"      value="SCI"   desc="Name or number of science extension" level="3"/>
            <param type="String"  name="var_ext"      value="VAR"   desc="Name or number of variance extension" level="3"/>
            <param type="String"  name="dq_ext"       value="DQ"    desc="Name or number of data quality extension" level="3"/>
            <param type="String"  name="key_filter"   value="FILTER"    desc="Keyword for filter id" level="3"/>
            <param type="String"  name="key_ron"      value="RDNOISE"   desc="Header keyword for read noise (e-)" level="3"/>
            <param type="String"  name="key_sat"      value="SATURATI"  desc="Keyword for saturation (ADU)" level="3"/>
            <param type="String"  name="key_nonlinear" value="NONLINEA" desc="Header keyword for non-linear regime (ADU)" level="3"/>
            <param type="boolean" name="fl_vardq"     value="yes"   desc="Create variance and data quality frames?" level="3"/>
            <param type="boolean" name="verbose"      value="yes"   desc="Verbose" level="2"/>
        </params>
    </recipe>

<!--  GI Reduce  -->
    <recipe name="gireduce" task="gemini.gmos.gireduce" id="gireduce"
            desc="Reduce images from GMOS (overscan, trim, bias, dark, flat)">
        <inputs>
	    <input name="inimages" desc="Input GMOS images"/>
	    <input name="bias" desc="Bias image"/>
	    <input name="dark" desc="Dark image"/>
	    <input name="flat1" desc="Flatfield image 1"/>
	    <input name="flat2" desc="Flatfield image 2"/>
	    <input name="flat3" desc="Flatfield image 3"/>
	    <input name="flat4" desc="Flatfield image 4"/>
        </inputs>
        <outputs>
	    <output name="outimages" desc="Output images"/>
        </outputs>
        <params>
	    <param type="String"  name="outpref"     value="r"   desc="Prefix for output images" level="1"/>
	    <param type="boolean" name="fl_over"     value="no"  desc="Subtract overscan level" level="3"/>
	    <param type="boolean" name="fl_trim"     value="yes" desc="Trim off the overscan section" level="2"/>
	    <param type="boolean" name="fl_bias"     value="yes" desc="Subtract bias image" level="2"/>
	    <param type="boolean" name="fl_dark"     value="no"  desc="Subtract (scaled) dark image" level="3"/>
	    <param type="boolean" name="fl_flat"     value="yes" desc="Do flat field correction?" level="2"/>
	    <param type="boolean" name="fl_vardq"    value="no"  desc="Create variance and data quality frames" level="3"/>
	    <param type="boolean" name="fl_addmdf"   value="no"  desc="Add Mask Definition File? (LONGSLIT/MOS/IFU modes)" level="3"/>
	    <param type="String"  name="key_exptime" value="EXPTIME" desc="Header keyword of exposure time" level="3"/>
	    <param type="String"  name="key_biassec" value="BIASSEC" desc="Header keyword for bias section" level="3"/>
	    <param type="String"  name="key_datasec" value="DATASEC" desc="Header keyword for data section" level="3"/>
	    <param type="String"  name="rawpath"     value=""    desc="GPREPARE: Path for input raw images" level="1"/>
	    <param type="String"  name="gp_outpref"  value="g"   desc="GPREPARE: Prefix for output images" level="1"/>
	    <param type="String"  name="sci_ext"     value="SCI" desc="Name of science extension" level="3"/>
	    <param type="String"  name="var_ext"     value="VAR" desc="Name of variance extension" level="3"/>
	    <param type="String"  name="dq_ext"      value="DQ"  desc="Name of data quality extension" level="3"/>
	    <param type="String"  name="key_mdf"     value="MASKNAME" desc="Header keyword for the Mask Definition File" level="3"/>
	    <param type="String"  name="mdffile"     value=""    desc="MDF file to use if keyword not found" level="3"/>
	    <param type="String"  name="mdfdir"      value="gmos$data/" desc=" MDF database directory" level="1"/>
	    <param type="String"  name="bpm"         value=""    desc="Bad pixel mask" level="1"/>
	    <param type="String"  name="gaindb"      value="gmos$data/gmosamps.dat" desc="Database with gain data" level="3"/>
	    <param type="int"     name="sat"         value="65000" desc="Saturation level in raw images [ADU]" level="3"/>
	    <param type="String"  name="key_filter"  value="FILTER2" desc="Header keyword of filter" level="3"/>
	    <param type="String"  name="key_ron"     value="RDNOISE" desc="Header keyword for readout noise" level="3"/>
	    <param type="String"  name="key_gain"    value="GAIN" desc="Header keyword for gain (e-/ADU)" level="3"/>
	    <param type="double"  name="ron"         value="3.5"  desc="Readout noise in electrons" level="3"/>
	    <param type="double"  name="gain"        value="2.2"  desc="Gain in e-/ADU" level="3"/>
	    <param type="boolean" name="fl_inter"    value="no"   desc="Interactive overscan fitting?" level="3"/>
	    <param type="boolean" name="median"      value="no"   desc="Use median instead of average in column bias?" level="3"/>
	    <param type="choice"  name="function"    value="chebyshev" desc="Overscan fitting function" level="3">
	        <choice	name="spline3"/>
		<choice name="legendre"/>
		<choice name="chebyshev"/>
		<choice name="spline1"/>
	    </param>
	    <param type="int"     name="order"       value="1"   desc="Order of overscan fitting function" level="3"/>
	    <param type="double"  name="low_reject"  value="3."  desc="Low sigma rejection factor in overscan fit" level="3"/>
	    <param type="double"  name="high_reject" value="3."  desc="High sigma rejection factor in overscan fit" level="3"/>
	    <param type="int"     name="niterate"    value="2"   desc="Number of rejection iterations in overscan fit" level="3"/>
	    <param type="boolean" name="verbose"     value="yes" desc="Verbose?" level="2"/>
        </params>
    </recipe>



<!-- GMOS Mosaic -->
    <recipe name="gmosaic" task="gemini.gmos.gmosaic" id="gmosaic"
            desc="Mosaic the 3 GMOS CCDs into one image">
        <inputs>
	    <input name="inimages" desc="Input GMOS images"/>
        </inputs>
        <outputs>
	    <output name="outimages" desc="Output images"/>
        </outputs>
        <params>
	    <param type="String"  name="outpref"     value="m"      desc="Prefix for output images" level="1"/>
	    <param type="boolean" name="fl_paste"    value="no"     desc="Paste images instead of mosaic" level="3"/>
	    <param type="choice"  name="geointer"    value="linear" desc="Interpolant to use with geotran" level="2">
	        <choice name="linear"/>
		<choice name="nearest"/>
		<choice name="poly3"/>
		<choice name="poly5"/>
		<choice name="spline3"/>
		<choice name="sinc"/>
	    </param>
	    <param type="int"     name="gap"         value="37"      desc="Gap between the CCDs in unbinned pixels" level="3"/>
	    <param type="String"  name="sci_ext"     value="SCI"     desc="Extension(s) to mosaic use, '' for raw data" level="3"/>
	    <param type="String"  name="key_detsec"  value="DETSEC"  desc="Header keyword for detector section" level="3"/>
	    <param type="String"  name="key_datsec"  value="DATASEC" desc="Header keyword for data section" level="3"/>
	    <param type="String"  name="key_ccdsum"  value="CCDSUM"  desc="Header keyword for CCD binning" level="3"/>
	    <param type="String"  name="bpmfile"     value="gmos$data/chipgaps.dat" desc="Info on location of chip gaps" level="3"/>
	    <param type="boolean" name="fl_fixpix"   value="no"      desc="Interpolate across chip gaps" level="3"/>
	    <param type="boolean" name="fl_clean"    value="yes"     desc="Clean imaging data outside imaging field" level="3"/>
	    <param type="String"  name="key_obsmode" value="OBSMODE" desc="Header keyword for observing mode" level="3"/>
	    <param type="String"  name="obsmode"     value="IMAGE"   desc="Value of key_obsmode for imaging data" level="3"/>
	    <param type="String"  name="statsec"     value="default" desc="Statistics section for cleaning" level="3"/>
	    <param type="boolean" name="verbose"     value="yes"     desc="Verbose" level="2"/>
        </params>
    </recipe>



<!-- GMOS gprepare -->
    <recipe name="gprepare" task="gemini.gmos.gprepare" id="gprepare"
            desc="Prepare raw GMOS data for reductions">
        <inputs>
	    <input name="inimages" desc="List of raw GMOS images to prepare"/>
        </inputs>
        <outputs>
	    <output name="outimages" desc="Output MEF images"/>
        </outputs>
        <params>
	    <param type="String"  name="rawpath"   value=""         desc="Path for input raw images" level="1"/>
	    <param type="String"  name="outpref"   value="g"        desc="Prefix for output images" level="1"/>
	    <param type="boolean" name="fl_vardq"  value="no"       desc="Create variance and data quality frames" level="3"/>
	    <param type="boolean" name="fl_addmdf" value="no"       desc="Add Mask Definition File (LONGSLIT/MOS/IFU modes)" level="2"/>
	    <param type="String"  name="sci_ext"   value="SCI"      desc="Name of science extension" level="3"/>
	    <param type="String"  name="var_ext"   value="VAR"      desc="Name of variance extension" level="3"/>
	    <param type="String"  name="dq_ext"    value="DQ"       desc="Name of data quality extension" level="3"/>
	    <param type="String"  name="key_mdf"   value="MASKNAME" desc="Header keyword for the Mask Definition File" level="3"/>
	    <param type="String"  name="mdffile"   value=""         desc="MDF file to use if keyword not found" level="2"/>
	    <param type="String"  name="mdfdir"    value="gmos$data/" desc=" MDF database directory" level="2"/>
	    <param type="String"  name="bpm"       value=""         desc="Bad Pixel Mask filename" level="3"/>
	    <param type="String"  name="gaindb"    value="gmos$data/gmosamps.dat" desc="Database with gain data" level="3"/>
	    <param type="int"     name="sat"       value="65000"    desc="Saturation level in raw images (ADU)" level="3"/>
	    <param type="String"  name="key_ron"   value="RDNOISE"  desc="Header keyword for readout noise" level="3"/>
	    <param type="String"  name="key_gain"  value="GAIN"     desc="Header keyword for gain (e-/ADU)" level="3"/>
	    <param type="double"  name="ron"       value="3.5"      desc="Readout noise in electrons" level="3"/>
	    <param type="double"  name="gain"      value="2.2"      desc="Gain in e-/ADU" level="3"/>
	    <param type="String"  name="key_dsec"  value="DATASEC"  desc="Header keyword for data section" level="3"/>
	    <param type="boolean" name="verbose"   value="yes"      desc="Verbose?" level="2"/>
        </params>
    </recipe>

<!-- GMOS gbias -->
    <recipe name="gbias" task="gemini.gmos.gbias" id="gbias"
            desc="Derives average GMOS bias images from raw or gprepared images">
        <inputs>
            <input name="inimages" desc="Input GMOS bias images or list"/>
            <input name="bpm"      desc="Bad pixel mask file"/>
        </inputs>
        <outputs>
            <output name="outbias" desc="Output bias (zero level) image"/>
        </outputs>
        <params>
            <param type="boolean" name="fl_over"     value="no"        desc="Subtract overscan level" level="2"/>
            <param type="boolean" name="fl_trim"     value="yes"       desc="Trim overscan section"   level="2"/>
            <param type="String"  name="key_biassec" value="BIASSEC"   desc="Header keyword for overscan strip image section" level="3"/>
            <param type="String"  name="key_datasec" value="DATASEC"   desc="Header keyword for data section (excludes the overscan)" level="3"/>
            <param type="String"  name="key_ron"     value="RDNOISE"   desc="Header keyword for readout noise" level="3"/>
            <param type="String"  name="key_gain"    value="GAIN"      desc="Header keyword for gain (e-/ADU" level="3"/>
            <param type="double"  name="ron"         value="3.5"       desc="Readout noise value to use if keyword not found" level="3"/>
            <param type="double"  name="gain"        value="2.2"       desc="Gain value to use if keyword not found" level="3"/>

            <param type="String"  name="gaindb"      value="gmos$data/gmosamps.dat" desc="Database with gain data" level="2"/>
            <param type="boolean" name="fl_vardq"    value="no"        desc="Create variance and data quality frames?" level="2"/>
            <param type="String"  name="sci_ext"     value="SCI"       desc="Name of science extension" level="3"/>
            <param type="String"  name="var_ext"     value="VAR"       desc="Name of variance extension" level="3"/>
            <param type="String"  name="dq_ext"      value="DQ"        desc="Name of data quality extension" level="3"/>
            <param type="int"     name="sat"         value="65000"     desc="Saturation level in raw images" level="3"/>

            <param type="boolean" name="fl_inter"    value="no"        desc="Interactive overscan fitting" level="3"/>
            <param type="boolean" name="median"      value="no"        desc="Use median instead of average in column bias" level="3"/>
            <param type="choice"  name="function"    value="chebyshev" desc="Overscan fitting function." level="3">
	        <choice name="legendre"/>
		<choice name="chebyshev"/>
		<choice name="spline1"/>
		<choice name="spline3"/>
            </param>
            <param type="int"     name="order"       value="1"         desc="Order of overscan fitting function." level="3"/>
            <param type="double"  name="low_reject"  value="3."        desc="Low sigma rejection factor." level="3"/>
            <param type="double"  name="high_reject" value="3."        desc="High sigma rejection factor." level="3"/>
            <param type="int"     name="niterate"    value="3"         desc="Number of rejection iterations." level="3"/>

            <param type="choice"  name="combine"     value="average"   desc="Type of combination operation" level="3">
                <choice name="average"/>
                <choice name="median"/>
            </param>

            <param type="choice"  name="reject"      value="avsigclip" desc="Type of rejection algorithm" level="3">
                <choice name="none"/>
                <choice name="minmax"/>
                <choice name="ccdclip"/>
                <choice name="crreject"/>
                <choice name="sigclip"/>
                <choice name="avsigclip"/>
                <choice name="pclip"/>
            </param>

            <!-- These two are acutally "double" but I can't represent INDEF. -->
            <param type="String"  name="lthreshold"  value="INDEF"     desc="Lower threshold for rejection before scaling" level="3"/>
            <param type="String"  name="hthreshold"  value="INDEF"     desc="Upper threshold for rejection before scaling" level="3"/>

            <param type="choice"  name="scale"       value="none" desc="Image scaling" level="3">
                <choice name="none"/>
                <choice name="mode"/>
                <choice name="median"/>
                <choice name="mean"/>
                <choice name="exposure"/>
                <choice name="@&lt;file&gt;"/>
                <choice name="!&lt;keyword&gt;"/>
            </param>
            <param type="choice"  name="zero"        value="none" desc="Image zero point offset" level="3">
                <choice name="none"/>
                <choice name="mode"/>
                <choice name="median"/>
                <choice name="mean"/>
                <choice name="@&lt;file&gt;"/>
                <choice name="!&lt;keyword&gt;"/>
            </param>

            <param type="choice"  name="weight"      value="none" desc="Image weights" level="3">
                <choice name="none"/>
                <choice name="mode"/>
                <choice name="median"/>
                <choice name="mean"/>
                <choice name="exposure"/>
                <choice name="@&lt;file&gt;"/>
                <choice name="!&lt;keyword&gt;"/>
            </param>

            <param type="String"  name="statsec"     value="[**]"    desc="Image region for computing statistics" level="3"/>
            <param type="String"  name="key_exptime" value="EXPTIME" desc="Header keyword for exposure time" level="3"/>
            <param type="int"     name="nlow"        value="0"       desc="minmax: Number of low pixels to reject" level="3"/>
            <param type="int"     name="nhigh"       value="1"       desc="minmax: Number of high pixels to reject" level="3"/>
            <param type="int"     name="nkeep"       value="1"       desc="Minimum to keep or maximum to reject" level="3"/>

            <param type="boolean" name="mclip"       value="yes"     desc="Use median in sigma clipping algorithms?" level="3"/>
            <param type="double"  name="lsigma"      value="3."      desc="Lower sigma clipping factor" level="3"/>
            <param type="double"  name="hsigma"      value="3."      desc="Upper sigma clipping factor" level="3"/>
            <param type="String"  name="snoise"      value="0.0"     desc="ccdclip: Sensitivity noise (electrons)" level="3"/>
            <param type="double"  name="sigscale"    value="0.1"     desc="Tolerance for sigma clipping scaling correction" level="3"/>
            <param type="double"  name="pclip"       value="-0.5"    desc="pclip: Percentile clipping parameter" level="3"/>
            <param type="double"  name="grow"        value="0.0"     desc="Radius (pixels) for neighbor rejection" level="3"/>

            <param type="boolean" name="verbose"     value="yes"     desc="Verbose output?" level="2"/>
        </params>
    </recipe>

<!-- GMOS giflat -->
    <recipe name="giflat" task="gemini.gmos.giflat" id="giflat"
            desc="Derive normalize imaging flat for GMOS">
        <inputs>
            <input name="inflats"  desc="Input flat field images"/>
            <input name="bpm"      desc="Bad pixel mask file"/>
            <input name="bias"     desc="Bias calibration image"/>
        </inputs>
        <outputs>
            <output name="outflat" desc="Output flat field image"/>
        </outputs>
        <params>
            <param type="String"    name="normsec"      value="default"   desc="Image section to get the normalization." level="3"/>
            <param type="boolean"   name="fl_scale"     value="yes"       desc="Scale the flat images before combining?"    level="2"/>
            <param type="choice"    name="sctype"       value="mean"      desc="Type of statistics to compute for scaling" level="2">
                <choice name="mean"/>
                <choice name="mode"/>
                <choice name="midpt"/>
            </param>

            <param type="String"    name="statsec"      value="default"   desc="Image section for relative intensity scaling" level="2"/>
            <param type="String"    name="key_gain"     value="GAIN"      desc="Header keyword for gain (e-/ADU)"      level="3"/>

            <param type="String"    name="sci_ext"      value="SCI"       desc="Name of science extension"                level="3"/>
            <param type="String"    name="var_ext"      value="VAR"       desc="Name of variance extension"               level="3"/>
            <param type="String"    name="dq_ext"       value="DQ"        desc="Name of data quality extension"            level="3"/>
            <param type="boolean"   name="fl_vardq"     value="no"        desc="Create variance and data quality frames?"    level="2"/>
            <param type="int"       name="sat"          value="65000"     desc="Saturation level in raw images (ADU)"  level="3"/>
            <param type="boolean"   name="verbose"      value="yes"       desc="Verbose output?"                            level="2"/>

            <param type="choice"    name="combine"      value="average"   desc="Type of combine operation" level="3">
                <choice name="average"/>
                <choice name="median"/>
            </param>

            <param type="choice"    name="reject"       value="avsigclip" desc="Type of rejection in flat average" level="3">
                <choice name="none"/>
                <choice name="minmax"/>
                <choice name="avsigclip"/>
                <choice name="crreject"/>
            </param>

            <!-- These should be "double" but need to represent INDEF. -->
            <param type="String"    name="lthreshold"   value="INDEF"     desc="Lower threshold when combining"           level="3"/>
            <param type="String"    name="hthreshold"   value="INDEF"     desc="Upper threshold when combining"           level="3"/>
            <param type="int"       name="nlow"         value="0"         desc="minmax: Number of low pixels to reject" level="3"/>
            <param type="int"       name="nhigh"        value="1"         desc="minmax: Number of high pixels to reject" level="3"/>
            <param type="int"       name="nkeep"        value="1"         desc="avsigclip: Minimum to keep (pos) or maximum to reject (neg)" level="3"/>
            <param type="boolean"   name="mclip"        value="yes"       desc="avsigclip: Use median in clipping algorithm?" level="3"/>
            <param type="double"    name="lsigma"       value="3."        desc="avsigclip: Lower sigma clipping factor"       level="3"/>
            <param type="double"    name="hsigma"       value="3."        desc="avsigclip: Upper sigma clipping factor"       level="3"/>
            <param type="double"    name="sigscale"     value="0.1"       desc="avsigclip: Tolerance for clipping scaling corrections" level="3"/>
            <param type="double"    name="grow"         value="0."        desc="minmax or avsigclip: Radius (pixels) for neighbor rejection" level="3"/>

            <param type="String"    name="gp_outpref"   value="g"         desc="Gprepare prefix for output images"     level="3"/>
            <param type="String"    name="key_ron"      value="RDNOISE"   desc="Header keyword for readout noise"      level="3"/>
            <param type="String"    name="key_datasec"  value="DATASEC"   desc="Header keyword for data section"       level="3"/>
            <param type="String"    name="gaindb"       value="gmos$data/gmosamps.dat" desc="Database with gain data" level="2"/>

            <param type="String"    name="gi_outpref"   value="r"         desc="Gireduce prefix for output images"           level="3"/>
            <param type="boolean"   name="fl_over"      value="no"        desc="Subtract overscan level?"                     level="2"/>
            <param type="boolean"   name="fl_trim"      value="yes"       desc="Trim images?"                                level="2"/>
            <param type="boolean"   name="fl_bias"      value="yes"       desc="Bias-subtract images?"                       level="2"/>
            <param type="boolean"   name="fl_inter"     value="no"        desc="Interactive overscan fitting?"               level="3"/>
            <param type="String"    name="key_biassec"  value="BIASSEC"   desc="Header keyword for overscan image section" level="3"/>
            <param type="boolean"   name="median"       value="no"        desc="Use median instead of average in column bias?" level="3"/>
            <param type="choice"    name="function"     value="chebyshev" desc="Overscan fitting function." level="3">
                <choice name="legendre"/>
                <choice name="chebyshev"/>
                <choice name="spline1"/>
                <choice name="spline3"/>
            </param>
            <param type="int"       name="order"        value="1"         desc="Order of overscan fitting function."           level="3"/>
            <param type="double"    name="low_reject"   value="3."        desc="Low sigma rejection factor."                  level="3"/>
            <param type="double"    name="high_reject"  value="3."        desc="High sigma rejection factor."                 level="3"/>
            <param type="int"       name="niterate"     value="2"         desc="Number of rejection iterations."             level="3"/>
        </params>
    </recipe>


<!-- GMOS gidisplay -->
    <recipe name="gdisplay" task="gemini.gmos.gdisplay" id="gdisplay"
            desc="Display GMOS (raw) images.">
        <inputs>
            <input name="image"  desc="GMOS image to display"/>
        </inputs>
        <!-- No outputs generated by automatted use. -->
        <outputs/>
        <params>
            <param type="choice"  name="stdimage"    value="imtgmos" desc="GMOS stdimage"                          level="1">
                <choice name="imtgmos"/>
                <choice name="imtgmos2"/>
                <choice name="imtgmos4"/>
                <choice name="imtgmos8"/>
            </param>
            <param type="int"     name="frame"       value="1"       desc="Frame to write to"                      level="1"/>
            <!-- Don't allow fl_paste to be changed, since doing so would turn on interactive features (imexamine). -->
            <!--<param type="boolean" name="fl_paste"    value="no"      desc="Paste images to one for imexamine"      level="2"/>-->
            <param type="boolean" name="fl_bias"     value="no"      desc="Rough bias subtraction"                 level="2"/>
            <param type="int"     name="gap"         value="37"      desc="Size of the gap between the CCDs (in pixels)" level="3"/>
            <param type="double"  name="z1"          value="0."      desc="Lower limit if not autoscaling"         level="2"/>
            <param type="double"  name="z2"          value="0."      desc="Upper limit if not autoscaling"         level="2"/>
            <param type="String"  name="sci_ext"     value="all"     desc="Name of extension(s) to display"        level="3"/>
            <param type="String"  name="key_detsec"  value="DETSEC"  desc="Header keyword for detector section"    level="3"/>
            <param type="String"  name="key_datasec" value="DATASEC" desc="Header keyword for data section"        level="3"/>
            <param type="String"  name="key_ccdsum"  value="CCDSUM"  desc="Header keyword for CCD binning"         level="3"/>
            <param type="String"  name="gaindb"      value="gmos$data/gmosamps.dat" desc="Database with gain data" level="2"/>
            <param type="boolean" name="verbose"     value="no"      desc="Verbose"                                level="2"/>
        </params>
    </recipe>


<!-- GMOS gifringe -->
    <recipe name="gifringe" task="gemini.gmos.gifringe" id="gifringe"
            desc="Create fringe frames.">
        <inputs>
            <input name="input"  desc="Input MEF images"/>
            <input name="bpm"    desc="Name of bad pixel mask file or image."/>
        </inputs>
        <outputs>
            <output name="output" desc="Output MEF image"/>
        </outputs>
        <params>
            <param type="String"  name="title"        value=""        desc="Title for output SCI plane"             level="3"/>
            <param type="int"     name="xorder"       value="3"       desc="Order of fitting function in x"         level="2"/>
            <param type="int"     name="yorder"       value="3"       desc="order of fitting function in y"         level="2"/>
            <param type="choice"  name="function"     value="legendre" desc="Function for surface fit"              level="2">
                <choice name="legendre"/>
                <choice name="chebyshev"/>
                <choice name="spline3"/>
                <choice name="spline1"/>
            </param>
            <param type="int"     name="xmed"         value="1"      desc="X length of median box"                          level="2"/>
            <param type="int"     name="ymed"         value="1"      desc="X length of median box"                          level="2"/>
            <param type="String"  name="columns"      value="*,*,*"  desc="Columns to be fit for each extension"            level="2"/>
            <param type="choice"  name="combine"      value="median" desc="Combination operation"                           level="3">
                <choice name="average"/>
                <choice name="median"/>
            </param>
            <param type="String"  name="reject"       value="avsigclip" desc="Rejection algorithm"                          level="3"/>
            <param type="String"  name="scale"        value="none"    desc="Image scaling"                                  level="3"/>
            <param type="String"  name="zero"         value="mean"    desc="Image zeropoint offset"                         level="3"/>
            <param type="String"  name="weight"       value="none"    desc="Image weights"                                  level="3"/>
            <param type="String"  name="statsec"      value="[*,*]"   desc="Statistics section"                             level="3"/>
            <param type="String"  name="expname"      value="EXPTIME" desc="Exposure time header keyword"                   level="3"/>
            <param type="double"  name="lthreshold"   value="INDEF"   desc="Lower threshold"                                level="3"/>
            <param type="double"  name="hthreshold"   value="INDEF"   desc="Upper threshold"                                level="3"/>
            <param type="int"     name="nlow"         value="1"       desc="minmax: Number of low pixels to reject"         level="3"/>
            <param type="int"     name="nhigh"        value="1"       desc="minmax: Number of high pixels to reject"        level="3"/>
            <param type="int"     name="nkeep"        value="0"       desc="Minimum to keep or maximum to reject"           level="3"/>
            <param type="boolean" name="mclip"        value="yes"     desc="Use median in sigma clipping algorithms?"       level="3"/>
            <param type="double"  name="lsigma"       value="3."      desc="Lower sigma clipping factor"                    level="3"/>
            <param type="double"  name="hsigma"       value="3."      desc="Upper sigma clipping factor"                    level="3"/>
            <param type="String"  name="key_ron"      value="RDNOISE" desc="Keyword for readout noise in e-"                level="3"/>
            <param type="String"  name="key_gain"     value="GAIN"    desc="Keyword for gain in electrons/ADU"              level="3"/>
            <param type="double"  name="ron"          value="0.0"     desc="Readout noise rms in electrons"                 level="3"/>
            <param type="double"  name="gain"         value="1.0"     desc="Gain in e-/ADU"                                 level="3"/>
            <param type="String"  name="snoise"       value="0.0"     desc="ccdclip: Sensitivity noise (electrons)"         level="3"/>
            <param type="double"  name="sigscale"     value="0.1"     desc="Tolerance for sigma clipping scaling correction" level="3"/>
            <param type="double"  name="pclip"        value="-0.5"    desc="pclip: Percentile clipping parameter"           level="3"/>
            <param type="double"  name="grow"         value="0.0"     desc="Radius (pixels) for neighbor rejection"         level="3"/>
            <param type="String"  name="sci_ext"      value="SCI"     desc="Name(s) or number(s) of science extension"      level="3"/>
            <param type="String"  name="var_ext"      value="VAR"     desc="Name(s) or number(s) of variance extension"     level="3"/>
            <param type="String"  name="dq_ext"       value="DQ"      desc="Name(s) or number(s) of data quality extension" level="3"/>
            <param type="boolean" name="fl_vardq"     value="no"      desc="Make variance and data quality planes?"         level="2"/>
            <param type="boolean" name="fl_dqprop"    value="no"      desc="Propagate all DQ values?"                       level="2"/>
            <param type="boolean" name="verbose"      value="yes"     desc="Verbose output?"                                level="2"/>
        </params>
    </recipe>

<!-- GMOS girmfringe -->
    <recipe name="girmfringe" task="gemini.gmos.girmfringe" id="girmfringe"
            desc="Scale and subtrace a fringe frame from a GMOS gireduced image.">
        <inputs>
            <input name="inimages"  desc="Input MEF images"/>
            <input name="fringe"  desc="Fringe frame"/>
        </inputs>
        <outputs>
            <output name="outimages" desc="Output MEF images"/>
        </outputs>
        <params>
            <param type="String"  name="outpref"      value="f"            desc="Prefix for output images"                       level="1"/>
            <param type="boolean" name="fl_statscale" value="no"           desc="Scale by statistics rather than exposure time?" level="2"/>
            <param type="String"  name="statsec"      value="[SCI,2][*,*]" desc="Extension and region for satistics"             level="2"/>
            <param type="double"  name="scale"        value="0.0"          desc="Override auto-scaling if not 0.0"               level="2"/>
            <param type="boolean" name="verbose"      value="yes"          desc="Verbose output?"                                level="2"/>
        </params>
    </recipe>

</recipes>
